<style>
    /* nLab logo dark mode support */
    .ncatlab-logo {
        display: inline !important;
    }

    .ncatlab-logo-dark {
        display: none !important;
    }

    [data-theme="dark"] .ncatlab-logo {
        display: none !important;
    }

    [data-theme="dark"] .ncatlab-logo-dark {
        display: inline !important;
    }

    /* Override theme's brightness filter for nLab logos */
    [data-theme="dark"] .ncatlab-logo,
    [data-theme="dark"] .ncatlab-logo-dark {
        filter: none !important;
    }

    /* Override theme's lazy loading opacity for nLab logos */
    .ncatlab-logo,
    .ncatlab-logo-dark {
        opacity: 1 !important;
    }
</style>

<!-- KaTeX Font Preloading -->
{{- if .Params.math -}}
<!-- Preload KaTeX CSS synchronously to prevent FOUT -->
<link rel="stylesheet" href="https://npm.webcache.cn/katex@0.16.11/dist/katex.min.css"
    integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">

<!-- Preload KaTeX Fonts -->
<link rel="preload" href="https://npm.webcache.cn/katex@0.16.11/dist/fonts/KaTeX_Main-Regular.woff2" as="font"
    type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://npm.webcache.cn/katex@0.16.11/dist/fonts/KaTeX_Math-Italic.woff2" as="font"
    type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://npm.webcache.cn/katex@0.16.11/dist/fonts/KaTeX_Size1-Regular.woff2" as="font"
    type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://npm.webcache.cn/katex@0.16.11/dist/fonts/KaTeX_Size2-Regular.woff2" as="font"
    type="font/woff2" crossorigin="anonymous">
{{- end -}}